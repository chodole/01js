<script>

    /*
            student배열은 이번 학기 중간고사 성적이다.
            가로 한 줄을 기준으로 맨 앞은 번호이고, 뒤에 숫자 3개는
            각각 수학, 영어, 국어 점수이다. 
    */

    let student = [
        {"num" : 1001,  "math" : 100, "eng" : 20, "kor" : 30},
        {"num" : 1002,  "math" : 53, "eng" : 60, "kor" : 10},
        {"num" : 1003,  "math" : 15, "eng" : 10, "kor" : 50},
        {"num" : 1004,  "math" : 16, "eng" : 40, "kor" : 20},
        {"num" : 1005,  "math" : 23, "eng" : 58, "kor" : 42}
    ];

    /*
        [문제]
            세 과목의 총합을 추가하고 각 점수의 등수도 추가하시오. 
            단, 등수순으로 오름차순 출력하시오. 
            등수가 같으면 번호가큰순으로 내림차순 출력하시오.
        [정답]
            math : 100
            eng : 20
            kor : 30
            total : 150
            rank : 1

            num : 1005
            math : 23
            eng : 58
            kor : 42
            total : 123
            rank : 2

            num : 1002
            math : 53
            eng : 60
            kor : 10
            total : 123
            rank : 2

            num : 1004
            math : 16
            eng : 40
            kor : 20
            total : 76
            rank : 4

            num : 1003
            math : 15
            eng : 10
            kor : 50
            total : 75
            rank : 5
    */

    for(let i=0;i<student.length;i++){
        student[i]["total"] = student[i]["math"]+student[i]['eng']+student[i]["kor"];
    }

    for(let i=0;i<student.length;i++){
        let rank=1;
        for(let j=0;j<student.length;j++){
            if(student[i]["total"]<student[j]["total"]){
                rank++;
            }
        }
        student[i]["rank"] = rank;
    }

    student.sort((a,b)=>{
        if(a["rank"]<b["rank"]){
            return-1;
        }else if(a["rank"]>b["rank"]){
            return 1;
        }else {
            if(a["num"]<b["num"]){
                return 1;
            }else if(a["num"]>b["num"]){
                return -1;
            }else{
                return 0;
            }
        }
    });

    for(let i=0;i<student.length;i++){
        let list=Object.keys(student[i]);
        for(let j=0;j<list.length;j++){
            let key = list[j];
            document.write(key+" : "+student[i][key]+"<br>");
        }
        document.write("<br>");
    }

</script>